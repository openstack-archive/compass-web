<div class="modal-body">
  <div class="pull-right editor-title">Dashboard settings</div>

  <div ng-model="editor.index" bs-tabs style="text-transform:capitalize;">
    <div ng-repeat="tab in ['General', 'Rows','Controls', 'Metrics', 'Import']" data-title="{{tab}}">
    </div>
    <div ng-repeat="tab in dashboard.current.nav" data-title="{{tab.type}}">
    </div>
  </div>

  <div ng-if="editor.index == 0">
    <div class="editor-row">
      <div class="section">
        <div class="editor-option">
          <label class="small">Title</label><input type="text" class="input-large" ng-model='dashboard.current.title'></input>
        </div>
        <div class="editor-option">
          <label class="small">Style</label><select class="input-small" ng-model="dashboard.current.style" ng-options="f for f in ['dark','light']"></select>
        </div>
        <div class="editor-option">
          <label class="small">Time correction</label>
          <select ng-model="dashboard.current.timezone" class='input-small' ng-options="f for f in ['browser','utc']"></select>
        </div>
        <div class="editor-option">
          <label class="small"> Hints <tip>Show 'Add panel' hints in empty spaces</tip></label><input type="checkbox" ng-model="dashboard.current.panel_hints" ng-checked="dashboard.current.panel_hints" />
        </div>
        <div class="editor-option">
          <label class="small">Hide controls</label>
          <input type="checkbox" ng-model="dashboard.current.hideControls" ng-checked="dashboard.current.hideControls">
        </div>
      </div>
    </div>
     <div class="editor-row">
      <div class="section">
        <div class="editor-option">
          <label class="small">Tags</label>
          <bootstrap-tagsinput ng-model="dashboard.current.tags" tagclass="label label-tag" placeholder="add tags">
          </bootstrap-tagsinput>
          <tip>Press enter to a add tag</tip>
        </div>
      </div>
    </div>
  </div>

  <div ng-if="editor.index == 1">
    <div class="editor-row">
      <div class="span8">
        <h4>Rows</h4>
        <table class="table table-striped">
          <thead>
            <th width="1%"></th>
            <th width="1%"></th>
            <th width="1%"></th>
            <th width="97%">Title</th>
          </thead>
          <tr ng-repeat="row in dashboard.current.rows">
            <td><i ng-click="_.move(dashboard.current.rows,$index,$index-1)" ng-hide="$first" class="pointer icon-arrow-up"></i></td>
            <td><i ng-click="_.move(dashboard.current.rows,$index,$index+1)" ng-hide="$last" class="pointer icon-arrow-down"></i></td>
            <td><i ng-click="dashboard.current.rows = _.without(dashboard.current.rows,row)" class="pointer icon-remove"></i></td>
            <td>{{row.title}}</td>
          </tr>
        </table>
      </div>
      <div class="span4">
        <h4>Add Row</h4>
        <label class="small">Title</label>
        <input type="text" class="input-normal" ng-model='row.title' placeholder="New row"></input>
        <label class="small">Height</label>
        <input type="text" class="input-mini" ng-model='row.height'></input>
      </div>
    </div>
  </div>

  <div ng-if="editor.index == 2" ng-controller="dashLoader">
    <div class="editor-row">
      <div class="section">
        <h5>Save to</h5>
        <div class="editor-option">
          <label class="small">Export</label><input type="checkbox" ng-model="dashboard.current.loader.save_local" ng-checked="dashboard.current.loader.save_local">
        </div>
        <div class="editor-option">
          <label class="small">Browser</label><input type="checkbox" ng-model="dashboard.current.loader.save_default" ng-checked="dashboard.current.loader.save_default">
        </div>
        <div class="editor-option">
          <label class="small">Gist <tip>Requires your domain to be OAUTH registered with Github<tip></label><input type="checkbox" ng-model="dashboard.current.loader.save_gist" ng-checked="dashboard.current.loader.save_gist">
        </div>
        <div class="editor-option">
          <label class="small">Elasticsearch</label><input type="checkbox" ng-model="dashboard.current.loader.save_elasticsearch" ng-checked="dashboard.current.loader.save_elasticsearch">
        </div>
      </div>
      <div class="section">
        <h5>Load from</h5>
        <div class="editor-option">
          <label class="small">Local file</label><input type="checkbox" ng-model="dashboard.current.loader.load_local" ng-checked="dashboard.current.loader.load_local">
        </div>
        <div class="editor-option">
          <label class="small">Gist</label><input type="checkbox" ng-model="dashboard.current.loader.load_gist" ng-checked="dashboard.current.loader.load_gist">
        </div>
        <div class="editor-option">
          <label class="small">Elasticsearch</label><input type="checkbox" ng-model="dashboard.current.loader.load_elasticsearch" ng-checked="dashboard.current.loader.load_elasticsearch">
        </div>
        <div class="editor-option" ng-show="dashboard.current.loader.load.elasticsearch">
          <label class="small">ES list size</label><input class="input-mini" type="number" ng-model="dashboard.current.loader.load_elasticsearch_size">
        </div>
      </div>
      <div class="section">
      <h5>Sharing</h5>
        <div class="editor-option" >
          <label class="small">Allow Sharing <tip>Allow generating adhoc links to dashboards</tip></label><input type="checkbox" ng-model="dashboard.current.loader.save_temp" ng-checked="dashboard.current.loader.save_temp">
        </div>
        <div class="editor-option" ng-show="dashboard.current.loader.save_temp">
          <label class="small">TTL <tip>Expire temp urls</tip></label><input type="checkbox" ng-model="dashboard.current.loader.save_temp_ttl_enable">
        </div>
        <div class="editor-option" ng-show="dashboard.current.loader.save_temp &amp;&amp; dashboard.current.loader.save_temp_ttl_enable">
          <label class="small">TTL Duration <tip>Elasticsearch date math, eg: 1m,1d,1w,30d  </tip></label><input class="input-small" type="text" ng-model="dashboard.current.loader.save_temp_ttl">
        </div>
      </div>
    </div>
  </div>

  <div ng-if="editor.index == 2">
    <div class="editor-row">
      <div class="section">
        <h5>Feature toggles</h5>
        <div class="editor-option" ng-repeat="pulldown in dashboard.current.pulldowns">
          <label class="small" style="text-transform:capitalize;">{{pulldown.type}}</label><input type="checkbox" ng-model="pulldown.enable" ng-checked="pulldown.enable">
        </div>
        <div class="editor-option" ng-repeat="pulldown in dashboard.current.nav">
          <label class="small" style="text-transform:capitalize;">{{pulldown.type}}</label><input type="checkbox" ng-model="pulldown.enable" ng-checked="pulldown.enable">
        </div>
      </div>
    </div>
  </div>

  <div ng-if="editor.index == 3">
    <ng-include src="'app/partials/loadmetrics.html'"></ng-include>
  </div>

  <div ng-if="editor.index == 4">
    <ng-include src="'app/partials/import.html'"></ng-include>
  </div>

  <div ng-repeat="pulldown in dashboard.current.nav" ng-controller="SubmenuCtrl" ng-show="editor.index == 5+$index">
    <ng-include ng-show="pulldown.enable" src="edit_path(pulldown.type)"></ng-include>
    <button ng-hide="pulldown.enable" class="btn" ng-click="pulldown.enable = true">Enable the {{pulldown.type}}</button>
  </div>

</div>

<div class="modal-footer">
  <div class="pull-left grafana-version-footer" ng-if="editor.index == 0">
    <span class="editor-option small">
      Grafana version: {{grafanaVersion}}
    </span>
    <div class="small" grafana-version-check>
    </div>
  </div>

  <button ng-click="add_row(dashboard.current,row); reset_row();" class="btn btn-success" ng-show="editor.index == 1">Create Row</button>
  <button type="button" class="btn btn-info" ng-click="editor.index=0;dismiss();reset_panel();dashboard.refresh()">Close</button>
</div>